---
import { Image } from 'astro:assets'
import Layout from '../layouts/Layout.astro'
import { ContactForm } from '../components/preact/ContactForm'
---

<Layout title='Driven Stage Detailing - Contact'>
  <!-- Contact Section with Car Animation -->
  <section
    class='first-section bg-gradient-to-br from-primary/5 via-dark to-dark relative pb-20 bg-dark overflow-hidden'
  >
    <!-- Animated Car Background -->
    <div
      id='car-animation'
      class='absolute inset-0 opacity-30 transition-all duration-800 ease-out transform translate-x-full scale-75'
    >
      <div
        id='contact'
        class='absolute right-0 top-1/2 -translate-y-1/2 w-full h-full'
      >
        <img
          src='/images/yellow-sport-car.png'
          alt='Car approaching'
          class='w-full h-full object-cover object-center'
        />
        <div
          class='absolute inset-0 bg-gradient-to-l from-transparent via-dark/50 to-dark'
        >
        </div>
      </div>
    </div>

    <!-- Contact Form Container -->
    <div
      class='container lg:pb-10 mx-auto px-6 relative z-10 h-full flex items-center'
    >
      <div
        class='flex flex-col lg:flex-row lg:gap-20 lg:justify-around w-full'
      >
        <!-- Left Side - Giant Title -->
        <div
          class='flex lg:mt-20 flex-col text-center lg:text-left pt-2 justify-center h-full'
        >
          <h2
            id='giant-title'
            class='text-4xl md:text-6xl lg:text-7xl mb-6 font-bold font-barlow text-white leading-none opacity-0 transform translate-y-6 transition-all duration-800 ease-out'
          >
            Get Your
            <span class='text-gradient-primary block'>Free Quote</span>
          </h2>
          <p
            id='subtitle'
            class='text-white mt-8 text-lg leading-relaxed opacity-0 transform translate-y-8 transition-all duration-800 ease-out delay-300'
          >
            Ready to bring the best professional detailing service directly to
            your location. Fill out the form and we'll reply with a personalized
            quote as soon as possible.
          </p>
          <ul class='mt-8 space-y-3 text-sm text-light/80'>
            <li class='flex items-start gap-2'>
              <span class='text-white font-bold'>•</span> Same-day response during
              business hours.
            </li>
            <li class='flex items-start gap-2'>
              <span class='text-white font-bold'>•</span> Premium products and certified
              processes.
            </li>
            <li class='flex items-start gap-2'>
              <span class='text-white font-bold'>•</span> Mobile service: we come
              to your home or office.
            </li>
          </ul>
        </div>

        <!-- Contact Form - Right Side -->
        <article
          class='flex flex-col justify-center h-full w-full max-w-3xl lg:max-w-md xl:max-w-xl mt-10'
        >
          <ContactForm client:visible blurredBackground />
        </article>
      </div>
    </div>

    <!-- JavaScript for Car Animation -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const carElement = document.getElementById('car-animation')
        const giantTitle = document.getElementById('giant-title')
        const subtitle = document.getElementById('subtitle')
        const contactSection = document.querySelector('section:last-of-type')

        if (!carElement || !contactSection || !giantTitle || !subtitle) return

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                // Car enters the scene
                carElement.classList.remove('translate-x-full', 'scale-75')
                carElement.classList.add('translate-x-0', 'scale-100')
                carElement.style.opacity = '0.3'

                // Animate giant title and subtitle
                setTimeout(() => {
                  giantTitle.classList.remove('opacity-0', 'translate-y-8')
                  giantTitle.classList.add('opacity-100', 'translate-y-0')
                }, 200)

                setTimeout(() => {
                  subtitle.classList.remove('opacity-0', 'translate-y-8')
                  subtitle.classList.add('opacity-100', 'translate-y-0')
                }, 500)
              } else {
                // Car exits the scene
                carElement.classList.add('translate-x-full', 'scale-75')
                carElement.classList.remove('translate-x-0', 'scale-100')
                carElement.style.opacity = '0.1'

                // Hide title and subtitle
                giantTitle.classList.add('opacity-0', 'translate-y-8')
                giantTitle.classList.remove('opacity-100', 'translate-y-0')

                subtitle.classList.add('opacity-0', 'translate-y-8')
                subtitle.classList.remove('opacity-100', 'translate-y-0')
              }
            })
          },
          {
            threshold: 0.3,
            rootMargin: '0px 0px -10% 0px',
          },
        )

        observer.observe(contactSection)
      })
    </script>
  </section>
</Layout>

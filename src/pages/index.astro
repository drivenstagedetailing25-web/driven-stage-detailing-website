---
import { ContactForm } from '../components/react/ContactForm'
import { OpenContactModalButton } from '../components/react/OpenContactModalButton'
import Layout from '../layouts/Layout.astro'
import { Image } from 'astro:assets'

const services = [
  {
    id: 1,
    title: 'Mobile Detailing',
    slug: 'mobile-detailing',
    description:
      'Professional detailing services that come to you. State-of-the-art equipment and premium products delivered to your location.',
    image: '/images/services/car-detailing.jpg',
    alt: 'Mobile Detailing Service',
  },
  {
    id: 3,
    title: 'Paint Correction',
    slug: 'paint-correction',
    description:
      'Multi-stage process that eliminates swirl marks and scratches, restoring your vehicle to factory-perfect finish.',
    image: '/images/services/paint-correction.jpg',
    alt: 'Paint Correction Service',
  },
  {
    id: 2,
    title: 'Ceramic Coating',
    slug: 'ceramic-coating',
    description:
      'Advanced nanotechnology protection that creates an invisible armor for your vehicle, enhancing shine and durability.',
    image: '/images/services/ceramic-coating.jpg',
    alt: 'Ceramic Coating Service',
  },
]
---

<Layout 
  title='Driven Stage Detailing - Professional Mobile Auto Detailing Services'
  description='Professional mobile auto detailing services at your location. Premium paint correction, ceramic coating, and detailing with state-of-the-art equipment and certified technicians.'
>
  <!-- Hero Section -->
  <section
    class='min-h-[100dvh] flex items-center justify-center relative overflow-hidden lg:pt-10'
  >
    <div class='absolute inset-0 z-0'>
      <video
        autoplay
        muted
        loop
        playsinline
        poster='/videos/fallback.webp'
        class='absolute inset-0 w-full h-full object-cover'
      >
        <source src='/videos/video-bg.webm' type='video/webm' />
        Your browser does not support the video tag.
      </video>

      <div class='absolute inset-0 bg-black/60'></div>
    </div>

    <div class='container mx-auto px-6 text-center relative z-20 pt-10'>
      <h1
        class='text-5xl md:text-[80px] font-bold tracking-wide text-white mb-6 animate-slide-up font-barlow flex flex-col items-center'
      >
        <span class='block animate-fade-up'>DRIVEN STAGE MOBILE</span>
        <span class='block animate-fade-up animate-delay-300'>
          <span class='text-primary'>LUXURY AUTO</span>
          <span class='text-gradient-primary inline-block max-w-fit mx-auto'
            >DETAILING</span
          >
        </span>
      </h1>

      <p
        class='text-xl md:text-[22px] mb-8 max-w-2xl mx-auto animate-slide-up text-muted font-semibold'
      >
        Auto Detailing Services employing premium products and industry best
        practices
      </p>

      <div
        class='flex flex-col sm:flex-row gap-4 justify-center animate-slide-up'
        style='animation-delay: 0.4s;'
      >
        <a href='/services' class='btn btn-primary btn-lg font-bold'>
          View Services
        </a>
        <a href='/contact' class='btn btn-secondary btn-lg font-bold border-2'>
          Contact Us
        </a>
      </div>
    </div>
  </section>

  <!-- Services Preview Section -->
  <section id='services' class='py-20 bg-white'>
    <div class='container mx-auto px-6'>
      <h2
        class='text-4xl md:text-5xl text-gradient-primary font-bold text-center font-barlow mb-16 max-w-fit mx-auto'
      >
        Our Services
      </h2>

      <div class='grid lg:grid-cols-3 gap-12 max-w-7xl mx-auto'>
        {
          services.map((service) => (
            <article class='group cursor-pointer relative overflow-hidden rounded-2xl aspect-[3/4] hover:shadow-2xl transition-all duration-500 animate-fade-up'>
              <Image
                width={600}
                height={400}
                src={service.image}
                alt={service.alt}
                class='absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110'
              />

              <div class='absolute inset-0 transition-colors duration-300 bg-gradient-to-t from-black via-black/50 to-transparent  group-hover:via-black/80' />

              {/* Service Title */}

              <div class='absolute inset-0 flex flex-col justify-end p-8'>
                <h3 class='text-3xl font-bold text-white mb-4 font-barlow transform transition-transform duration-300'>
                  {service.title}
                </h3>

                {/* Service Description */}

                <div class=''>
                  <p class='text-zinc-300 leading-relaxed mb-4'>
                    {service.description}
                  </p>

                  {/* Service View Detail Link */}

                  <a
                    href={`/services/${service.slug}`}
                    class='btn btn-primary btn-sm inline-flex items-center'
                  >
                    VIEW DETAIL
                    <svg
                      class='ml-2 w-4 h-4 transition-transform duration-300 group-hover:translate-x-1'
                      fill='none'
                      stroke='currentColor'
                      viewBox='0 0 24 24'
                    >
                      <path
                        stroke-linecap='round'
                        stroke-linejoin='round'
                        stroke-width='2'
                        d='M9 5l7 7-7 7'
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Why Choose Us Section -->
  <section class='py-20 bg-muted-blue'>
    <div class='container mx-auto px-6'>
      <h2
        class='text-4xl md:text-5xl font-bold text-center font-barlow text-primary mb-16 h-22'
      >
        Why <span class='text-gradient-primary'>Choose Us?</span>
      </h2>

      <div class='space-y-16'>
        <div class='grid lg:grid-cols-2 gap-12 lg:gap-16 items-center'>
          <div class='lg:pl-8'>
            <h3 class='text-3xl font-bold text-primary mb-6 font-barlow'>
              Mobile Service at Your Location
            </h3>
            <p class='text-foreground mb-6 leading-relaxed text-lg'>
              We bring our professional service directly to your location. Our
              fully equipped mobile truck features state-of-the-art technology,
              and all the premium products needed. No need to leave your home or
              office - we handle everything on-site for your convenience.
            </p>
            <OpenContactModalButton client:visible>
              Book Now
            </OpenContactModalButton>
          </div>

          <div class='relative overflow-hidden rounded-2xl animate-fade-right'>
            <Image
              width={600}
              height={400}
              src='/images/features/mobile-detailing-trailer.jpg'
              alt='Mobile Detailing Trailer'
              class='w-full h-[400px] object-cover'
            />
          </div>
        </div>

        <!-- Trained Experts -->
        <div class='grid lg:grid-cols-2 gap-12 lg:gap-16 items-center'>
          <div class='order-2 lg:order-1 relative overflow-hidden rounded-2xl animate-fade-left'>
            <Image
              width={600}
              height={400}
              src='/images/features/profesional-technicians.jpg'
              alt='Trained Experts at Work'
              class='w-full h-[400px] object-cover'
            />
          </div>

          <div class='order-1 lg:order-2 lg:pr-8'>
            <h3 class='text-3xl font-bold text-primary mb-6 font-barlow'>
              Certified Specialists
            </h3>
            <p class='text-foreground mb-6 leading-relaxed text-lg'>
              Our team consists of highly trained and certified technicians in
              every service area. Each team member receives continuous training
              in the latest detailing techniques, paint correction methods, and
              ceramic coating applications. Your vehicle will be in expert hands
              who understand the specific needs of every surface and material.
            </p>
          </div>
        </div>

        <!-- Quality & Excellence -->
        <div class='grid lg:grid-cols-2 gap-12 lg:gap-16 items-center'>
          <div class='order-2 relative overflow-hidden rounded-2xl animate-fade-right'>
            <Image
              width={600}
              height={400}
              src='/images/features/car-washing.jpg'
              alt='Quality & Excellence in Service'
              class='w-full h-[400px] object-cover'
            />
          </div>

          <div class='order-1 lg:order-1 lg:pl-8'>
            <h3 class='text-3xl font-bold text-primary mb-6 font-barlow'>
              Quality & Excellence
            </h3>
            <p class='text-foreground mb-6 leading-relaxed text-lg'>
              We implement the highest quality standards in every service. We
              use only premium products from world-renowned brands, follow
              strict cleaning protocols, and apply proven techniques that
              guarantee exceptional results. Every vehicle receives the same
              careful attention to detail, regardless of make or model.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section with Car Animation -->
  <section class='relative py-20 bg-dark overflow-hidden'>
    <!-- Animated Car Background -->
    <div
      id='car-animation'
      class='absolute inset-0 opacity-30 transition-all duration-800 ease-out transform translate-x-full scale-75'
    >
      <div
        id='contact'
        class='absolute right-0 top-1/2 -translate-y-1/2 w-full h-full'
      >
        <img
          src='/images/yellow-sport-car.webp'
          alt='Car approaching'
          class='w-full h-full object-cover object-center'
        />
        <div
          class='absolute inset-0 bg-gradient-to-l from-transparent via-dark/50 to-dark'
        >
        </div>
      </div>
    </div>

    <!-- Contact Form Container -->
    <div class='container mx-auto px-6 relative z-10 h-full flex items-center'>
      <div
        class='flex flex-col lg:flex-row items-center lg:justify-around w-full min-h-[100dvh]'
      >
        <!-- Left Side - Giant Title -->
        <div
          class='flex flex-col text-center lg:text-left pt-2 justify-center h-full'
        >
          <h2
            id='giant-title'
            class='text-6xl md:text-7xl lg:text-8xl xl:text-9xl font-bold font-barlow text-white leading-none opacity-0 transform translate-y-6 transition-all duration-800 ease-out'
          >
            Get Your
            <span class='text-gradient-primary block'>Free Quote</span>
          </h2>
          <p
            id='subtitle'
            class='text-muted text-xl md:text-2xl mt-10 lg:mt-14 max-w-2xl opacity-0 transform translate-y-8 transition-all duration-800 ease-out delay-300'
          >
            Ready to transform your vehicle with professional detailing?
          </p>
        </div>

        <!-- Contact Form - Right Side -->
        <article
          class='flex flex-col justify-center h-full w-full max-w-3xl lg:max-w-md xl:max-w-[550px] mt-10 lg:mt-0'
        >
          <ContactForm client:visible blurredBackground />
        </article>
      </div>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const carElement = document.getElementById('car-animation')
    const giantTitle = document.getElementById('giant-title')
    const subtitle = document.getElementById('subtitle')
    const contactSection = document.querySelector('section:last-of-type')

    if (!carElement || !contactSection || !giantTitle || !subtitle) return

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            // Car enters the scene
            carElement.classList.remove('translate-x-full', 'scale-75')
            carElement.classList.add('translate-x-0', 'scale-100')
            carElement.style.opacity = '0.3'

            // Animate giant title and subtitle
            setTimeout(() => {
              giantTitle.classList.remove('opacity-0', 'translate-y-8')
              giantTitle.classList.add('opacity-100', 'translate-y-0')
            }, 200)

            setTimeout(() => {
              subtitle.classList.remove('opacity-0', 'translate-y-8')
              subtitle.classList.add('opacity-100', 'translate-y-0')
            }, 500)
          } else {
            // Car exits the scene
            carElement.classList.add('translate-x-full', 'scale-75')
            carElement.classList.remove('translate-x-0', 'scale-100')
            carElement.style.opacity = '0.1'

            // Hide title and subtitle
            giantTitle.classList.add('opacity-0', 'translate-y-8')
            giantTitle.classList.remove('opacity-100', 'translate-y-0')

            subtitle.classList.add('opacity-0', 'translate-y-8')
            subtitle.classList.remove('opacity-100', 'translate-y-0')
          }
        })
      },
      {
        threshold: 0.3,
        rootMargin: '0px 0px -10% 0px',
      },
    )

    observer.observe(contactSection)
  })
</script>
